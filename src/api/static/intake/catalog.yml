aliases: {}
data:
  edd149bffacc03f8:
    datatype: intake.readers.datatypes:Zarr
    kwargs:
      root: ''
      storage_options:
        s3:
          anon: true
          endpoint_url: "https://s3.echo.stfc.ac.uk"
      url: '{urlpath}/{group}'
    metadata: {}
    user_parameters: {}
  edd149bffacc0:
    datatype: intake.readers.datatypes:Zarr
    kwargs:
      root: ''
      storage_options:
        s3:
          anon: true
          endpoint_url: "https://s3.echo.stfc.ac.uk"
      url: '{urlpath}'
    metadata: {}
    user_parameters: {}
  7063b40983ee5cd9:
    datatype: intake.readers.datatypes:Parquet
    kwargs:
      storage_options: null
      url: https://mastapp.site/parquet/shots
    metadata: {}
    user_parameters: {}
  dcf7227957373e40:
    datatype: intake.readers.datatypes:Parquet
    kwargs:
      storage_options: null
      url: https://mastapp.site/parquet/sources
    metadata: {}
    user_parameters: {}
  dcv7427657871r98:
    datatype: intake.readers.datatypes:Parquet
    kwargs:
      url: https://mastapp.site/parquet/signals?{% if shot_id %}shot_id={{shot_id}}{% endif %}{% if source_name != '' %}&name={{source_name}}{% endif %}
      #shot_id={shot_id}{% endif %}{% if {source_name}!='' %}&name={source_name}{% endif %}}
      #{% if shot %}shot_id={{shot}}{% endif %}{% if name != '' %}&name={{name}}{% endif %}
      #shot_id={shot_id}
      #?{% if shot_id %}shot_id={{ shot_id }}{% endif %}{% if source_name %}&name={{ source_name }}{% endif %}
    metadata: {}
    user_parameters: {}

# initializing pointer for common cache
common_cache: &cache
  cache_type:
    description: Type of caching to use with s3. Defaults to "simplecache"
    type: str
    default: "simplecache"

# initializing pointer for common xarray data loader option
common_xarray_option: &common_xarray_options
  metadata: {}
  output_instance: xarray:Dataset
  reader: intake.readers.readers:XArrayDatasetReader
  user_parameters: {}

# initializing pointer for common parquet data loader option
common_parquet_option: &common_parquet_options
  metadata: {}
  output_instance: pandas:DataFrame
  reader: intake.readers.readers:PandasParquet
  user_parameters: {}


entries:
  zarr_shots:
    kwargs:
      args:
      - '{data(edd149bffacc03f8)}'
      engine: zarr
    <<: *common_xarray_options
    <<: *cache
  zarr_source:
    kwargs:
      args:
      - '{data(edd149bffacc0)}'
      engine: zarr
    <<: *common_xarray_options
    <<: *cache
  parquet_shots:
    kwargs:
      args:
        - '{data(7063b40983ee5cd9)}'
    <<: *common_parquet_options
  parquet_sources:
    kwargs:
      args:
      - '{data(dcf7227957373e40)}'
    <<: *common_parquet_options
  parquet_signal:
    kwargs:
      args:
      - '{data(dcv7427657871r98)}'
    <<: *common_parquet_options
metadata: {}
user_parameters:
  group:
    default: 
    description: ''
    dtype: object
  urlpath:
    default: 
    description: ''
    dtype: object
  shot_id: 
    default: 
    description: ''
    dtype: object
  source_name: 
    default: ''
    description: ''
    dtype: object
  # signal_url: 
  #   default: https://mastapp.site/parquet/signals
  #   ${{ if shot_id and source_name != ''}}:
  #     - default: https://mastapp.site/parquet/signals?shot_id={shot_id}&name={source_name}
  #   ${{ elseif shot_id }}:
  #     - default: https://mastapp.site/parquet/signals?shot_id={shot_id}
  #   ${{ elseif source_name != '' }}:
  #     - default: https://mastapp.site/parquet/signals?name={source_name}
  #   ${{ else }}:
  #     - default: https://mastapp.site/parquet/signals
  #   # ${{ end }}:
  #   description: ''
  #   dtype: object
version: 2